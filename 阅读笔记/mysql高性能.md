## 基本概述

ACID

死锁：InnoDB处理死锁的方式是将持有最少排他锁的事务进行回滚（适用于基本情况）

#### MVCC：

行级锁的变种，保存时间点的快照并添加时间线(版本号)，通过每行记录后隐藏的版本号实现（支持可重复读，读已提交事务级别）

- 增：将当前版本号作为行版本号
- 删：同上
- 查：查找版本 <= 当前版本 && （删除版本未定义 || 删除版本 > 当前版本）
- 改：插入新纪录（当前版本作为版本号），修改原行删除版本号（当前版本）

InnoDB支持热备份

表的复制 P68



## 基准测试（待完成）

#### 工具：sysbench，Jmeter

#### 测试指标：（根据需求定）

- 吞吐量
- 响应时间
- 并发性
- 可拓展性



## 性能

性能即响应时间

我们将实际地讨论两种类型的性能剖析:基于执行时间的分析和基于等待的分析。

基于执行时间的分析研究的是什么任务的执行时间最长，

基于等待的分析则是判断任务在什么地方被阻塞的时间最长。





## 索引

#### B-tree 索引

```
最左前缀，叶子到根的距离相同，从根开始查找，确定范围
全值匹配
范围匹配
```



#### Hash索引：

```
精确匹配索引的列查询才有效

```

#### 空间索引：MyISAM

#### 索引策略

- 独立语句：查询的时候 避免出现 id + 1 = 5  =改为=> id = 1 + 5
- 前缀索引

#### 聚簇索引

```
不仅是一种单独的索引类型，而是一种数据存储方式
```

#### 覆盖索引

```
索引中包含了所需要查询的数据，不需要回表查询，减少io
```

